# Tipos de Aplicação no OAuth 2.0

O OAuth 2.0 define diferentes **tipos de aplicação** com base em **onde o código roda** e **qual o grau de confiança entre o client e o authorization server**. Isso impacta diretamente quais *flows* (autorização) devem ser utilizados e como as credenciais são armazenadas.

---

## 1. Confidential Applications (Aplicações Confiáveis)

### O que são?
Aplicações que **podem manter os segredos (client_secret) com segurança** . Normalmente são apps ao lado servidor (server-side), como:

- Backends em Java, Node, Python, etc.
- Aplicações web que processam requests no servidor.
- Microservices internos.

### Características
- Armazenam `client_id` e `client_secret` de forma segura.
- Capazes de autenticar diretamente com o Authorization Server.
- Usam fluxos mais completos e seguros (ex: Authorization Code com client_secret).

### Exemplos
- API backend da sua empresa que acessa recursos no Google Drive.
- Web app que gerencia tokens e autenticação via Spring Security.

### Flows recomendados
- ✅ Authorization Code Flow
- ✅ Client Credentials Flow

---

## 2. Public Applications (Aplicações Públicas)

### O que são?
Aplicações que **não podem manter segredos de forma segura**, pois rodam em ambientes expostos:

- SPAs (Single Page Applications) em JavaScript.
- Aplicativos móveis (Android, iOS).
- CLI tools.

### Características
- O `client_secret` **não é confiável** (pode ser decompilado).
- Dependem de métodos alternativos para proteger a identidade do client.
- Usam fluxos que **não requerem client_secret**.

### Exemplos
- App React que acessa dados do usuário via OAuth.
- Aplicativo Android que precisa fazer upload para Google Photos.

### Flows recomendados
- ✅ Authorization Code Flow com **PKCE** (Proof Key for Code Exchange)
- ❌ Não devem usar client credentials nem fluxo implícito (depreciado)

---

## 3. Native Applications (Aplicações Nativas)

### O que são?
Um subtipo de *Public Application* que rodam em dispositivos dos usuários, como:

- Aplicativos desktop (Electron, JavaFX).
- Mobile apps (Android, iOS).

### Características
- Executam localmente e interagem com navegadores ou web views para autenticação.
- Usam redirecionamento para URIs customizadas (ex: `myapp://callback`).
- Não armazenam secrets.

### Flows recomendados
- ✅ Authorization Code Flow com PKCE

---

## 4. Web Applications

### O que são?
Aplicações executadas em servidores web que interagem com navegadores.

### Características
- Confidenciais.
- Usam cookies e sessões.
- Podem proteger segredos (como `client_secret`).

### Flows recomendados
- ✅ Authorization Code Flow

---

## 5. Machine-to-Machine (M2M) Applications

### O que são?
Aplicações que **não envolvem interação humana**. São serviços que consomem APIs diretamente.

### Características
- Totalmente confidenciais.
- Executadas sem navegador ou user agent.
- Autenticam-se diretamente com `client_id` e `client_secret`.

### Exemplos
- Serviços de backend que rodam tarefas agendadas.
- Microservices que se comunicam via API.

### Flows recomendados
- ✅ Client Credentials Flow

---

## Flows
[Arquivo](./complementos/flows.md) explicando cada flow 

## Resumo

| Tipo                  | Pode guardar secrets? | Interação com usuário? | Flow recomendado                        |
|-----------------------|------------------------|-------------------------|------------------------------------------|
| Confidential App      | ✅ Sim                 | ✅ Sim (ou não)         | Authorization Code, Client Credentials   |
| Public App            | ❌ Não                | ✅ Sim                  | Authorization Code + PKCE                |
| Native App            | ❌ Não                | ✅ Sim                  | Authorization Code + PKCE                |
| Web App (server-side) | ✅ Sim                 | ✅ Sim                  | Authorization Code                       |
| M2M App               | ✅ Sim                 | ❌ Não                 | Client Credentials                       |

---

## Fontes oficiais
- [OAuth 2.0 RFC 6749](https://datatracker.ietf.org/doc/html/rfc6749)
- [OAuth 2.1 (draft)](https://oauth.net/2.1/)
- [OAuth Security Best Current Practices](https://oauth.net/)
